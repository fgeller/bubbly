
// Everything is a resource, and all resources have an output.
// The output can be something like:
// output:
//   - status: sucess
//   - value: <the value from the importer>
resource "importer" "junit-importer" {
    api_version = "v1"
    // this is an input to the importer to make it reusable
    spec {
        input "file" {}
        type = "xml"
        source {
            file = self.input.file
            format = object({
                testsuites: object({
                    duration: number,
                    testsuite: list(object({
                        failures: number,
                        name: string,
                        package: string,
                        tests: number,
                        time: number,
                        testcase: list(object({
                            classname: string
                            name: string
                            time: number
                        }))
                    }))
                })
            })
        }
    }
}
